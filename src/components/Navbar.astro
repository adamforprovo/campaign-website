---
const links = [
  { href: "/about", text: "About" },
  { href: "/issues", text: "Issues" },
  { href: "/donate", text: "Donate" },
  { href: "/contact", text: "Contact" },
  { href: "/about", text: "About" },
  { href: "/issues", text: "Issues" },
  { href: "/donate", text: "Donate" },
  { href: "/contact", text: "Contact" },
  { href: "/about", text: "About" },
  { href: "/issues", text: "Issues" },
  { href: "/donate", text: "Donate" },
  { href: "/contact", text: "Contact" },
  { href: "/about", text: "About" },
  { href: "/issues", text: "Issues" },
  { href: "/donate", text: "Donate" },
  { href: "/contact", text: "Contact" },
];
---

<header class="navbar">
  <div class="content-column-container">
    <div class="navbar-container">
      <a href="/" class="navbar-logo">Adam Shin for Provo</a>

      <!-- Desktop Navigation -->
      <nav class="navbar-links">
        {links.map(link => (
          <a href={link.href} class="nav-item">{link.text}</a>
        ))}
      </nav>

      <!-- Menu Button -->
      <button id="menu-button" class="menu-button">
        <svg class="size-6 text-content-text" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="4" y1="6" x2="20" y2="6"></line>
          <line x1="4" y1="12" x2="20" y2="12"></line>
          <line x1="4" y1="18" x2="20" y2="18"></line>
        </svg>
      </button>
    </div>
  </div>

  <!-- Nav Menu -->
  <div id="nav-menu" class="nav-menu menu-closed">
    <button id="nav-menu-close-button" class="nav-menu-close-button">
      <svg class="size-6 text-content-text"
        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" 
        stroke-linecap="round" stroke-linejoin="round">
        <line x1="5" y1="5" x2="19" y2="19"></line>
        <line x1="5" y1="19" x2="19" y2="5"></line>
      </svg>
    </button>

    <nav class="nav-menu-nav">
      {links.map(link => (
        <a href={link.href} class="nav-menu-nav-item">{link.text}</a>
      ))}
    </nav>
  </div>
</header>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const menuButton = document.getElementById("menu-button");
  const closeButton = document.getElementById("nav-menu-close-button");
  const navMenu = document.getElementById("nav-menu");

  if (!menuButton || !closeButton || !navMenu) return;

  function disableBackgroundScroll() {
    document.body.style.position = "fixed";
    document.body.style.top = `-${window.scrollY}px`;
    document.body.style.width = "100vw";
  }

  function enableBackgroundScroll() {
    const scrollY = document.body.style.top;
    document.body.style.position = "";
    document.body.style.top = "";
    document.body.style.width = "";
    window.scrollTo(0, parseInt(scrollY || "0") * -1);
  }

  menuButton.addEventListener("click", function () {
    disableBackgroundScroll();
    window.scrollTo({ top: 0, behavior: "instant" });
    navMenu.classList.add("menu-open");
  });

  closeButton.addEventListener("click", function () {
    enableBackgroundScroll();
    navMenu.classList.remove("menu-open");
  });

  navMenu.addEventListener("touchmove", function (event) {
    event.stopPropagation(); 
  });
});
</script>

<style>
  @reference "../styles/global.css";

  @theme {
    --breakpoint-navbar-break: 48rem;
  }

  .content-column-container {
    @apply h-full mx-auto ps-4 navbar-break:px-8 max-w-(--breakpoint-md);
  }

  .navbar {
    --link-padding: 1rem;
    @apply w-full h-14 navbar-break:h-16 bg-white shadow-lg;
  }

  .navbar-container {
    @apply h-full flex items-center justify-between overflow-hidden;
  }

  .navbar-logo {
    @apply h-full flex items-center text-xl navbar-break:text-2xl font-bold text-content-text whitespace-nowrap overflow-hidden;
  }

  .navbar-links {
    @apply h-full hidden navbar-break:flex -me-[var(--link-padding)];
  }

  .nav-item {
    @apply h-full flex items-center px-[var(--link-padding)] text-base font-medium text-content-text hover:text-sky-500;
  }

  .menu-button {
    @apply h-full w-14;
    @apply flex items-center justify-center;
    @apply cursor-pointer;
    @apply navbar-break:hidden;
  }

  /* Nav Menu */
  .nav-menu {
    @apply fixed inset-0 bg-white z-50 flex flex-col items-start opacity-0 translate-y-full transition-all duration-300;
    @apply overflow-y-auto; /* Enables scrolling inside the menu */
  }

  /* Open State */
  .menu-open {
    @apply opacity-100 translate-y-0;
  }

  /* Prevent Page Scrolling */
  .no-scroll {
    @apply overflow-hidden fixed inset-0 w-full h-full;
  }

  /* ðŸ”¹ Nav Menu Items */
  .nav-menu-nav {
    @apply w-full py-16 flex flex-col;
  }

  .nav-menu-nav-item {
    @apply text-[1.8rem] font-semibold text-content-text w-full px-12 py-3;
  }

  /* Close Button */
  .nav-menu-close-button {
    @apply absolute top-0 right-0 size-14;
    @apply flex items-center justify-center;
    @apply cursor-pointer;
  }
</style>